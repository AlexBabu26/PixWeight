<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 700" width="1200" height="700">
  <style>
    text { font-family: Arial, sans-serif; font-size: 12px; }
    .title { font-size: 24px; font-weight: bold; }
    .entity { fill: white; stroke: black; stroke-width: 2; }
    .process { fill: white; stroke: black; stroke-width: 2; }
    .datastore { fill: white; stroke: black; stroke-width: 2; }
    .arrow { stroke: black; stroke-width: 1.5; fill: none; marker-end: url(#arrowhead); }
    .label { font-size: 10px; }
  </style>
  
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="black"/>
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="600" y="35" text-anchor="middle" class="title">LEVEL 2</text>
  
  <!-- ==================== LEFT SIDE - ADMIN ==================== -->
  
  <!-- ADMIN Entity -->
  <rect x="30" y="310" width="80" height="40" class="entity"/>
  <text x="70" y="335" text-anchor="middle">ADMIN</text>
  
  <!-- Admin Login Process -->
  <ellipse cx="170" cy="330" rx="40" ry="25" class="process"/>
  <text x="170" y="335" text-anchor="middle">login</text>
  
  <!-- Data Store: admins -->
  <g>
    <line x1="140" y1="240" x2="140" y2="270" stroke="black" stroke-width="2"/>
    <line x1="140" y1="240" x2="220" y2="240" stroke="black" stroke-width="2"/>
    <line x1="140" y1="270" x2="220" y2="270" stroke="black" stroke-width="2"/>
    <text x="180" y="260" text-anchor="middle">admins</text>
  </g>
  
  <!-- Admin Main Process: Weight Estimation System -->
  <ellipse cx="310" cy="330" rx="70" ry="45" class="process"/>
  <text x="310" y="320" text-anchor="middle" font-weight="bold">Weight</text>
  <text x="310" y="335" text-anchor="middle" font-weight="bold">Estimation</text>
  <text x="310" y="350" text-anchor="middle" font-weight="bold">System</text>
  
  <!-- Admin Process: View Registered Users -->
  <ellipse cx="450" cy="100" rx="70" ry="25" class="process"/>
  <text x="450" y="95" text-anchor="middle">View Registered</text>
  <text x="450" y="110" text-anchor="middle">Users</text>
  
  <!-- Admin Process: Manage Sessions -->
  <ellipse cx="450" cy="180" rx="70" ry="25" class="process"/>
  <text x="450" y="185" text-anchor="middle">Manage Sessions</text>
  
  <!-- Admin Process: Manage Reference Data -->
  <ellipse cx="450" cy="260" rx="70" ry="25" class="process"/>
  <text x="450" y="255" text-anchor="middle">Manage Reference</text>
  <text x="450" y="270" text-anchor="middle">Data</text>
  
  <!-- Admin Process: View Estimates -->
  <ellipse cx="450" cy="340" rx="70" ry="25" class="process"/>
  <text x="450" y="345" text-anchor="middle">View Estimates</text>
  
  <!-- Admin Process: View Feedback -->
  <ellipse cx="450" cy="420" rx="70" ry="25" class="process"/>
  <text x="450" y="425" text-anchor="middle">View Feedback</text>
  
  <!-- ==================== CENTER - DATA STORES ==================== -->
  
  <!-- Data Store: users -->
  <g>
    <line x1="560" y1="80" x2="560" y2="120" stroke="black" stroke-width="2"/>
    <line x1="560" y1="80" x2="660" y2="80" stroke="black" stroke-width="2"/>
    <line x1="560" y1="120" x2="660" y2="120" stroke="black" stroke-width="2"/>
    <text x="610" y="105" text-anchor="middle">users</text>
  </g>
  
  <!-- Data Store: estimation_sessions -->
  <g>
    <line x1="560" y1="160" x2="560" y2="200" stroke="black" stroke-width="2"/>
    <line x1="560" y1="160" x2="660" y2="160" stroke="black" stroke-width="2"/>
    <line x1="560" y1="200" x2="660" y2="200" stroke="black" stroke-width="2"/>
    <text x="610" y="175" text-anchor="middle">estimation</text>
    <text x="610" y="190" text-anchor="middle">_sessions</text>
  </g>
  
  <!-- Data Store: reference_data -->
  <g>
    <line x1="560" y1="240" x2="560" y2="280" stroke="black" stroke-width="2"/>
    <line x1="560" y1="240" x2="660" y2="240" stroke="black" stroke-width="2"/>
    <line x1="560" y1="280" x2="660" y2="280" stroke="black" stroke-width="2"/>
    <text x="610" y="265" text-anchor="middle">reference_data</text>
  </g>
  
  <!-- Data Store: weight_estimates -->
  <g>
    <line x1="560" y1="320" x2="560" y2="360" stroke="black" stroke-width="2"/>
    <line x1="560" y1="320" x2="660" y2="320" stroke="black" stroke-width="2"/>
    <line x1="560" y1="360" x2="660" y2="360" stroke="black" stroke-width="2"/>
    <text x="610" y="345" text-anchor="middle">weight_estimates</text>
  </g>
  
  <!-- Data Store: uploaded_images -->
  <g>
    <line x1="560" y1="400" x2="560" y2="440" stroke="black" stroke-width="2"/>
    <line x1="560" y1="400" x2="660" y2="400" stroke="black" stroke-width="2"/>
    <line x1="560" y1="440" x2="660" y2="440" stroke="black" stroke-width="2"/>
    <text x="610" y="425" text-anchor="middle">uploaded_images</text>
  </g>
  
  <!-- Data Store: questions_answers -->
  <g>
    <line x1="560" y1="480" x2="560" y2="520" stroke="black" stroke-width="2"/>
    <line x1="560" y1="480" x2="660" y2="480" stroke="black" stroke-width="2"/>
    <line x1="560" y1="520" x2="660" y2="520" stroke="black" stroke-width="2"/>
    <text x="610" y="495" text-anchor="middle">questions</text>
    <text x="610" y="510" text-anchor="middle">_answers</text>
  </g>
  
  <!-- Data Store: weight_feedback -->
  <g>
    <line x1="560" y1="560" x2="560" y2="600" stroke="black" stroke-width="2"/>
    <line x1="560" y1="560" x2="660" y2="560" stroke="black" stroke-width="2"/>
    <line x1="560" y1="600" x2="660" y2="600" stroke="black" stroke-width="2"/>
    <text x="610" y="585" text-anchor="middle">weight_feedback</text>
  </g>
  
  <!-- ==================== RIGHT SIDE - USER ==================== -->
  
  <!-- User Process: View Profile -->
  <ellipse cx="770" cy="100" rx="65" ry="25" class="process"/>
  <text x="770" y="105" text-anchor="middle">View Profile</text>
  
  <!-- User Process: Upload Image -->
  <ellipse cx="770" cy="180" rx="65" ry="25" class="process"/>
  <text x="770" y="185" text-anchor="middle">Upload Image</text>
  
  <!-- User Process: Create Session -->
  <ellipse cx="770" cy="260" rx="65" ry="25" class="process"/>
  <text x="770" y="265" text-anchor="middle">Create Session</text>
  
  <!-- User Process: Answer Questions -->
  <ellipse cx="770" cy="340" rx="65" ry="25" class="process"/>
  <text x="770" y="335" text-anchor="middle">Answer</text>
  <text x="770" y="350" text-anchor="middle">Questions</text>
  
  <!-- User Process: View Estimate -->
  <ellipse cx="770" cy="420" rx="65" ry="25" class="process"/>
  <text x="770" y="425" text-anchor="middle">View Estimate</text>
  
  <!-- User Process: View History -->
  <ellipse cx="770" cy="500" rx="65" ry="25" class="process"/>
  <text x="770" y="505" text-anchor="middle">View History</text>
  
  <!-- User Process: Submit Feedback -->
  <ellipse cx="770" cy="580" rx="65" ry="25" class="process"/>
  <text x="770" y="585" text-anchor="middle">Submit Feedback</text>
  
  <!-- User Main Process: Weight Estimation System -->
  <ellipse cx="920" cy="340" rx="70" ry="45" class="process"/>
  <text x="920" y="330" text-anchor="middle" font-weight="bold">Weight</text>
  <text x="920" y="345" text-anchor="middle" font-weight="bold">Estimation</text>
  <text x="920" y="360" text-anchor="middle" font-weight="bold">System</text>
  
  <!-- User Login Process -->
  <ellipse cx="1040" cy="340" rx="40" ry="25" class="process"/>
  <text x="1040" y="345" text-anchor="middle">login</text>
  
  <!-- Data Store: users (right side for user login) -->
  <g>
    <line x1="1010" y1="250" x2="1010" y2="280" stroke="black" stroke-width="2"/>
    <line x1="1010" y1="250" x2="1090" y2="250" stroke="black" stroke-width="2"/>
    <line x1="1010" y1="280" x2="1090" y2="280" stroke="black" stroke-width="2"/>
    <text x="1050" y="270" text-anchor="middle">users</text>
  </g>
  
  <!-- USER Entity -->
  <rect x="1100" y="320" width="80" height="40" class="entity"/>
  <text x="1140" y="345" text-anchor="middle">USER</text>
  
  <!-- ==================== CONNECTIONS - ADMIN SIDE ==================== -->
  
  <!-- ADMIN to Login -->
  <path d="M 110 330 L 130 330" class="arrow"/>
  
  <!-- Login to admins (bidirectional) -->
  <path d="M 170 305 L 170 270" class="arrow"/>
  <path d="M 190 270 L 190 305" class="arrow"/>
  
  <!-- Login to Main System -->
  <path d="M 210 330 L 240 330" class="arrow"/>
  
  <!-- Main System to Admin Processes -->
  <path d="M 355 295 L 390 115" class="arrow"/>
  <path d="M 365 300 L 390 185" class="arrow"/>
  <path d="M 375 310 L 390 260" class="arrow"/>
  <path d="M 380 340 L 390 340" class="arrow"/>
  <path d="M 365 365 L 390 410" class="arrow"/>
  
  <!-- Admin Processes to Data Stores -->
  <path d="M 520 100 L 560 100" class="arrow"/>
  <path d="M 520 180 L 560 180" class="arrow"/>
  <path d="M 520 260 L 560 260" class="arrow"/>
  <path d="M 520 340 L 560 340" class="arrow"/>
  <path d="M 520 420 L 540 420 L 540 580 L 560 580" class="arrow"/>
  
  <!-- ==================== CONNECTIONS - USER SIDE ==================== -->
  
  <!-- USER to Login -->
  <path d="M 1100 340 L 1080 340" class="arrow"/>
  
  <!-- Login to users (bidirectional) -->
  <path d="M 1040 315 L 1040 280" class="arrow"/>
  <path d="M 1060 280 L 1060 315" class="arrow"/>
  
  <!-- Login to Main System -->
  <path d="M 1000 340 L 990 340" class="arrow"/>
  
  <!-- Main System to User Processes -->
  <path d="M 870 305 L 825 115" class="arrow"/>
  <path d="M 865 310 L 825 185" class="arrow"/>
  <path d="M 860 315 L 825 260" class="arrow"/>
  <path d="M 850 340 L 835 340" class="arrow"/>
  <path d="M 860 365 L 825 415" class="arrow"/>
  <path d="M 865 370 L 825 490" class="arrow"/>
  <path d="M 870 375 L 825 565" class="arrow"/>
  
  <!-- User Processes to Data Stores -->
  <path d="M 705 100 L 660 100" class="arrow"/>
  <path d="M 705 180 L 680 180 L 680 420 L 660 420" class="arrow"/>
  <path d="M 705 260 L 680 260 L 680 180 L 660 180" class="arrow"/>
  <path d="M 705 340 L 680 340 L 680 500 L 660 500" class="arrow"/>
  <path d="M 705 420 L 660 340" class="arrow"/>
  <path d="M 705 500 L 680 480 L 680 340 L 660 340" class="arrow"/>
  <path d="M 705 580 L 660 580" class="arrow"/>
  
  <!-- Page indicator -->
  <text x="600" y="680" text-anchor="middle" font-size="12" fill="#666">Page 6 - Complete System Level 2 DFD</text>
</svg>
