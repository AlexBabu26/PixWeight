<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 950 500" width="950" height="500">
  <style>
    text { font-family: Arial, sans-serif; font-size: 14px; }
    .title { font-size: 22px; font-weight: bold; }
    .entity { fill: white; stroke: black; stroke-width: 2; }
    .process { fill: white; stroke: black; stroke-width: 2; }
    .datastore { fill: white; stroke: black; stroke-width: 2; }
    .arrow { stroke: black; stroke-width: 1.5; fill: none; marker-end: url(#arrowhead); }
    .label { font-size: 11px; }
  </style>
  
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="black"/>
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="475" y="35" text-anchor="middle" class="title">LEVEL 1.2 USER - WEIGHT ESTIMATION PROCESS</text>
  
  <!-- USER Entity -->
  <rect x="50" y="200" width="100" height="50" class="entity"/>
  <text x="100" y="230" text-anchor="middle">USER</text>
  
  <!-- Process: Estimation Process -->
  <ellipse cx="260" cy="225" rx="90" ry="45" class="process"/>
  <text x="260" y="215" text-anchor="middle">Weight</text>
  <text x="260" y="235" text-anchor="middle">Estimation</text>
  <text x="260" y="255" text-anchor="middle">Process</text>
  
  <!-- Process: Submit Answers -->
  <ellipse cx="480" cy="90" rx="80" ry="30" class="process"/>
  <text x="480" y="95" text-anchor="middle">Submit Answers</text>
  
  <!-- Process: Estimate Weight (AI) -->
  <ellipse cx="480" cy="180" rx="80" ry="30" class="process"/>
  <text x="480" y="175" text-anchor="middle">Estimate Weight</text>
  <text x="480" y="195" text-anchor="middle">(AI Analysis)</text>
  
  <!-- Process: Calculate Category Data -->
  <ellipse cx="480" cy="270" rx="80" ry="30" class="process"/>
  <text x="480" y="265" text-anchor="middle">Calculate Category</text>
  <text x="480" y="285" text-anchor="middle">Specific Data</text>
  
  <!-- Process: Store Estimate -->
  <ellipse cx="480" cy="360" rx="80" ry="30" class="process"/>
  <text x="480" y="365" text-anchor="middle">Store Estimate</text>
  
  <!-- Process: Return Results -->
  <ellipse cx="480" cy="450" rx="80" ry="30" class="process"/>
  <text x="480" y="455" text-anchor="middle">Return Results</text>
  
  <!-- Data Store: answers (open right box) -->
  <g>
    <line x1="700" y1="70" x2="700" y2="110" stroke="black" stroke-width="2"/>
    <line x1="700" y1="70" x2="850" y2="70" stroke="black" stroke-width="2"/>
    <line x1="700" y1="110" x2="850" y2="110" stroke="black" stroke-width="2"/>
    <text x="775" y="95" text-anchor="middle">answers</text>
  </g>
  
  <!-- Data Store: estimation_sessions (open right box) -->
  <g>
    <line x1="700" y1="160" x2="700" y2="200" stroke="black" stroke-width="2"/>
    <line x1="700" y1="160" x2="850" y2="160" stroke="black" stroke-width="2"/>
    <line x1="700" y1="200" x2="850" y2="200" stroke="black" stroke-width="2"/>
    <text x="775" y="185" text-anchor="middle">estimation_sessions</text>
  </g>
  
  <!-- Data Store: reference_data (open right box) -->
  <g>
    <line x1="700" y1="250" x2="700" y2="290" stroke="black" stroke-width="2"/>
    <line x1="700" y1="250" x2="850" y2="250" stroke="black" stroke-width="2"/>
    <line x1="700" y1="290" x2="850" y2="290" stroke="black" stroke-width="2"/>
    <text x="775" y="275" text-anchor="middle">reference_data</text>
  </g>
  
  <!-- Data Store: weight_estimates (open right box) -->
  <g>
    <line x1="700" y1="340" x2="700" y2="380" stroke="black" stroke-width="2"/>
    <line x1="700" y1="340" x2="850" y2="340" stroke="black" stroke-width="2"/>
    <line x1="700" y1="380" x2="850" y2="380" stroke="black" stroke-width="2"/>
    <text x="775" y="365" text-anchor="middle">weight_estimates</text>
  </g>
  
  <!-- Connection: USER to Estimation Process -->
  <path d="M 150 225 L 170 225" class="arrow"/>
  
  <!-- Connection: Return Results back to USER -->
  <path d="M 400 455 Q 200 455 150 250" class="arrow"/>
  <text x="280" y="455" text-anchor="middle" class="label">Results</text>
  
  <!-- Connections: Main Process to Sub-processes -->
  <path d="M 330 190 L 400 105" class="arrow"/>
  <path d="M 345 205 L 400 180" class="arrow"/>
  <path d="M 345 245 L 400 265" class="arrow"/>
  <path d="M 330 265 L 400 350" class="arrow"/>
  
  <!-- Connections: Processes to Data Stores -->
  <path d="M 560 90 L 700 90" class="arrow"/>
  <path d="M 560 180 L 700 180" class="arrow"/>
  <path d="M 560 270 L 700 270" class="arrow"/>
  <path d="M 560 360 L 700 360" class="arrow"/>
  
  <!-- Flow arrows between processes -->
  <path d="M 480 120 L 480 150" class="arrow"/>
  <path d="M 480 210 L 480 240" class="arrow"/>
  <path d="M 480 300 L 480 330" class="arrow"/>
  <path d="M 480 390 L 480 420" class="arrow"/>
  
  <!-- Page indicator -->
  <text x="475" y="485" text-anchor="middle" font-size="12" fill="#666">Page 8 - User Weight Estimation Process DFD</text>
</svg>
